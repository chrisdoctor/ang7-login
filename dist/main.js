(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t){function r(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=146},147:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(208)),n(r(212)),n(r(213))},148:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(217))},149:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(219))},150:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(221))},151:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(152);var n=r(206),o=r(207);n.platformBrowserDynamic().bootstrapModule(o.AppModule)},152:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(153),r(177),r(205)},207:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),i=r(58),s=r(97),a=r(98),l=r(147),d=r(214),c=r(216),u=r(225),f=r(147),p=r(148),A=r(149),m=r(150),v=function(){function e(){}return e=n([o.NgModule({imports:[i.BrowserModule,s.ReactiveFormsModule,a.HttpClientModule,c.routing],declarations:[d.AppComponent,u.AlertComponent,p.HomeComponent,A.LoginComponent,m.SignupComponent],providers:[{provide:a.HTTP_INTERCEPTORS,useClass:f.JwtInterceptor,multi:!0},{provide:a.HTTP_INTERCEPTORS,useClass:f.ErrorInterceptor,multi:!0},l.localStorageBackendProvider],bootstrap:[d.AppComponent]})],e)}();t.AppModule=v},208:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(56),a=r(38),l=r(55),d=function(){function e(e){this.authenticationService=e}return e.prototype.intercept=function(e,t){var r=this;return t.handle(e).pipe(a.catchError(function(e){401===e.status&&(r.authenticationService.logout(),location.reload(!0));var t=e.error.message||e.statusText;return s.throwError(t)}))},e=n([i.Injectable(),o("design:paramtypes",[l.AuthenticationService])],e)}();t.ErrorInterceptor=d},209:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(66),a=r(56),l=function(){function e(e){var t=this;this.router=e,this.subject=new a.Subject,this.keepAfterNavigationChange=!1,e.events.subscribe(function(e){e instanceof s.NavigationStart&&(t.keepAfterNavigationChange?t.keepAfterNavigationChange=!1:t.subject.next())})}return e.prototype.success=function(e,t){void 0===t&&(t=!1),this.keepAfterNavigationChange=t,this.subject.next({type:"success",text:e})},e.prototype.error=function(e,t){void 0===t&&(t=!1),this.keepAfterNavigationChange=t,this.subject.next({type:"error",text:e})},e.prototype.getMessage=function(){return this.subject.asObservable()},e=n([i.Injectable({providedIn:"root"}),o("design:paramtypes",[s.Router])],e)}();t.AlertService=l},210:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(98),a=r(56),l=r(38),d=function(){function e(e){this.http=e,this.currentUserSubject=new a.BehaviorSubject(JSON.parse(localStorage.getItem("currentUser"))),this.currentUser=this.currentUserSubject.asObservable()}return Object.defineProperty(e.prototype,"currentUserValue",{get:function(){return this.currentUserSubject.value},enumerable:!0,configurable:!0}),e.prototype.login=function(e,t){var r=this;return this.http.post("http://localhost:4000/users/authenticate",{username:e,password:t}).pipe(l.map(function(e){return e&&e.token&&(localStorage.setItem("currentUser",JSON.stringify(e)),r.currentUserSubject.next(e)),e}))},e.prototype.logout=function(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)},e=n([i.Injectable({providedIn:"root"}),o("design:paramtypes",[s.HttpClient])],e)}();t.AuthenticationService=d},211:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(98),a=function(){function e(e){this.http=e}return e.prototype.getAll=function(){return this.http.get("http://localhost:4000/users")},e.prototype.getById=function(e){return this.http.get("http://localhost:4000/users/"+e)},e.prototype.signup=function(e){return this.http.post("http://localhost:4000/users/signup",e)},e.prototype.update=function(e,t){return this.http.post("http://localhost:4000/users/"+e,t)},e.prototype.delete=function(e){return this.http.delete("http://localhost:4000/users/"+e)},e=n([i.Injectable({providedIn:"root"}),o("design:paramtypes",[s.HttpClient])],e)}();t.UserService=a},212:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(55),a=function(){function e(e){this.authenticationService=e}return e.prototype.intercept=function(e,t){var r=this.authenticationService.currentUserValue;return r&&r.token&&(e=e.clone({setHeaders:{Authorization:"Bearer "+r.token}})),t.handle(e)},e=n([i.Injectable(),o("design:paramtypes",[s.AuthenticationService])],e)}();t.JwtInterceptor=a},213:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),i=r(98),s=r(56),a=r(38),l=JSON.parse(localStorage.getItem("users"))||[],d=function(){function e(){}return e.prototype.intercept=function(e,t){var r=e.url,n=e.method,o=e.headers,d=e.body;return s.of(null).pipe(a.mergeMap(function(){switch(!0){case r.endsWith("/users/signup")&&"POST"===n:return function(){var e=d;if(l.find(function(t){return t.userName===e.userName}))return f('Username "'+e.userName+'" already exists');return e.id=l.length?Math.max.apply(Math,l.map(function(e){return e.id}))+1:1,l.push(e),localStorage.setItem("users",JSON.stringify(l)),c()}();case r.endsWith("/users/authenticate")&&"POST"===n:return function(){var e=d.username,t=d.password,r=l.find(function(r){return r.userName===e&&r.password===t});return r?c({id:r.id,userName:r.userName,firstName:r.firstName,lastName:r.lastName,token:"dummy-jwt-token"}):f("Username or password is incorrect")}();case r.match(/\/users\/\d+$/)&&"GET"===n:return p()?c(l.find(function(e){return e.id==A()})):u();case r.match(/\/users\/\d+$/)&&"POST"===n:return function(){var e=d,t=A()-1;return p()?(e.id=t+1,l[t]=e,localStorage.setItem("users",JSON.stringify(l)),c()):u()}();default:return t.handle(e)}})).pipe(a.materialize()).pipe(a.delay(500)).pipe(a.dematerialize());function c(e){return s.of(new i.HttpResponse({status:200,body:e}))}function u(){return s.throwError({status:401,error:{message:"Unauthorised"}})}function f(e){return s.throwError({error:{message:e}})}function p(){return"Bearer dummy-jwt-token"===o.get("Authorization")}function A(){var e=r.split("/");return parseInt(e[e.length-1])}},e=n([o.Injectable()],e)}();t.LocalStorageBackendInterceptor=d,t.localStorageBackendProvider={provide:i.HTTP_INTERCEPTORS,useClass:d,multi:!0}},214:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(66),a=r(55),l=function(){function e(e,t){var r=this;this.router=e,this.authenticationService=t,this.authenticationService.currentUser.subscribe(function(e){return r.currentUser=e})}return e.prototype.logout=function(){this.authenticationService.logout(),this.router.navigate(["/login"])},e=n([i.Component({selector:"app",template:r(215)}),o("design:paramtypes",[s.Router,a.AuthenticationService])],e)}();t.AppComponent=l},215:function(e,t){e.exports='\x3c!-- nav --\x3e\n<nav class="navbar navbar-expand navbar-light bg-light" *ngIf="currentUser">\n    <div class="navbar-nav">\n        <a class="nav-item nav-link" routerLink="/">Home</a>\n        <a class="nav-item nav-link" (click)="logout()">Logout</a>\n    </div>\n</nav>\n\n<br>\n<div class="row">\n    <div class="col-sm-4 offset-sm-1">\n        <alert></alert>\n        <router-outlet></router-outlet>\n    </div>\n</div>\n<br>\n'},216:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(66),o=r(148),i=r(149),s=r(150),a=r(223),l=[{path:"",component:o.HomeComponent,canActivate:[a.AuthGuard]},{path:"login",component:i.LoginComponent},{path:"signup",component:s.SignupComponent},{path:"**",redirectTo:""}];t.routing=n.RouterModule.forRoot(l)},217:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(97),a=r(66),l=r(38),d=r(55),c=function(){function e(e,t,r,n,o){var i=this;this.authenticationService=e,this.userService=t,this.formBuilder=r,this.alertService=n,this.router=o,this.users=[],this.loading=!1,this.submitted=!1,this.currentUserSubscription=this.authenticationService.currentUser.subscribe(function(e){i.currentUser=e}),this.loadUser(this.currentUser.id)}return e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.currentUserSubscription.unsubscribe()},e.prototype.createForm=function(){this.profileForm=this.formBuilder.group({firstName:[this.userProfile.firstName,s.Validators.required],lastName:[this.userProfile.lastName,s.Validators.required],userName:[this.userProfile.userName,s.Validators.required],password:[this.userProfile.password,[s.Validators.required,s.Validators.minLength(8)]],phone:[this.userProfile.phone,s.Validators.required],birthday:[this.userProfile.birthday,s.Validators.required],address:this.formBuilder.array([])}),this.profileForm.setControl("address",this.setExistingAddress(this.userProfile.address))},e.prototype.setExistingAddress=function(e){var t=this,r=new s.FormArray([]);return e.forEach(function(e){r.push(t.formBuilder.group({street1:e.street1,street2:e.street2,city:e.city,country:e.country,postcode:e.postcode}))}),r},e.prototype.fileUpload=function(e){var t=this;if(0!==e.length){var r=new FileReader;r.readAsDataURL(e[0]),r.onload=function(e){t.imgURL=r.result,t.fileAttachment=r.result.toString()}}},e.prototype.loadUser=function(e){var t=this;this.userService.getById(e).pipe(l.first()).subscribe(function(e){t.userProfile=e,t.imgURL=t.userProfile.fileAttachment,t.createForm()})},Object.defineProperty(e.prototype,"f",{get:function(){return this.profileForm.controls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AddressForm",{get:function(){return this.profileForm.get("address")},enumerable:!0,configurable:!0}),e.prototype.addAddress=function(){var e=this.formBuilder.group({street1:["",s.Validators.required],street2:[""],city:["",s.Validators.required],country:["",s.Validators.required],postcode:["",s.Validators.required]});this.AddressForm.push(e)},e.prototype.deleteAddress=function(e){this.AddressForm.removeAt(e),this.AddressForm.markAsDirty(),this.AddressForm.markAsTouched()},e.prototype.onSubmit=function(){var e=this;this.submitted=!0,this.profileForm.invalid||(this.loading=!0,this.profileForm.value.fileAttachment=this.fileAttachment,this.userService.update(this.currentUser.id,this.profileForm.value).pipe(l.first()).subscribe(function(t){e.alertService.success("User information saved",!0),e.loading=!1,window.scrollTo(0,0)},function(t){e.alertService.error(t),e.loading=!1}))},e=n([i.Component({template:r(218)}),o("design:paramtypes",[d.AuthenticationService,d.UserService,s.FormBuilder,d.AlertService,a.Router])],e)}();t.HomeComponent=c},218:function(e,t){e.exports='\x3c!--\n<h1>User Listing</h1>\n<ul>\n    <li *ngFor="let user of users">\n        {{user.username}} ({{user.firstName}} {{user.lastName}})\n        - <a (click)="deleteUser(user.id)" class="text-danger">Delete</a>\n    </li>\n</ul>\n--\x3e\n<h2>User Information</h2>\n<br>\n<form *ngIf="profileForm" [formGroup]="profileForm" (ngSubmit)="onSubmit()">\n    <div class="form-group">\n        <label for="firstName">First Name</label>\n        <input type="text" formControlName="firstName" class="form-control" [value]="f.firstName.value" [ngClass]="{ \'is-invalid\': submitted && f.firstName.errors }" />\n        <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">\n            <div *ngIf="f.firstName.errors.required">First Name is required</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="lastName">Last Name</label>\n        <input type="text" formControlName="lastName" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.lastName.errors }" />\n        <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback">\n            <div *ngIf="f.lastName.errors.required">Last Name is required</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="userName">Username</label>\n        <input type="text" formControlName="userName" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.userName.errors }" />\n        <div *ngIf="submitted && f.userName.errors" class="invalid-feedback">\n            <div *ngIf="f.userName.errors.required">Username is required</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="password">Password</label>\n        <input type="password" formControlName="password" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.password.errors }" />\n        <div *ngIf="submitted && f.password.errors" class="invalid-feedback">\n            <div *ngIf="f.password.errors.required">Password is required</div>\n            <div *ngIf="f.password.errors.minlength">Password must be at least 8 characters</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="password">Phone Number</label>\n        <input type="text" formControlName="phone" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.phone.errors }" />\n        <div *ngIf="submitted && f.phone.errors" class="invalid-feedback">\n            <div *ngIf="f.phone.errors.required">Phone Number is required</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="password">Birthday</label>\n        <input type="text" formControlName="birthday" class="form-control"  [ngClass]="{ \'is-invalid\': submitted && f.birthday.errors }" />\n        <div *ngIf="submitted && f.birthday.errors" class="invalid-feedback">\n            <div *ngIf="f.birthday.errors.required">Birthday is required</div>\n        </div>\n    </div>\n    <br>\n    <div style="font-weight:400; font-size:1rem">Address</div>\n    <br>\n    <button (click)="addAddress();" class="btn btn-info">Add address</button>\n    <br><br>\n    <div *ngIf=" AddressForm.controls">\n        <div formArrayName="address">\n            <div *ngFor="let address of AddressForm.controls; let i = index;" [formGroupName]="i" style="border: 1px solid #ced4da; padding:15px; border-radius: .25rem;">\n                    <div class="form-group">\n                        <label for="street1">Street Line 1</label>\n                        <input type="text" class="form-control" formControlName="street1" [ngClass]="{ \'is-invalid\': submitted && f.address.controls[i].controls.street1.errors }" />\n                        <div *ngIf="submitted && f.address.controls[i].controls.street1.errors" class="invalid-feedback">\n                            <div *ngIf="f.address.controls[i].controls.street1.errors.required">Street Line 1 is required</div>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label for="street2">Street Line 2</label>\n                        <input type="text" class="form-control" formControlName="street2" />\n                    </div>\n                    <div class="form-group">\n                        <label for="city">City</label>\n                        <input type="text" class="form-control" formControlName="city" [ngClass]="{ \'is-invalid\': submitted && f.address.controls[i].controls.city.errors }">\n                        <div *ngIf="submitted && f.address.controls[i].controls.city.errors" class="invalid-feedback">\n                            <div *ngIf="f.address.controls[i].controls.city.errors.required">City is required</div>\n                        </div>\n                    </div>\n                    <div class="form-group">\n                        <label for="country">Country</label>\n                        <input type="text" class="form-control" formControlName="country" [ngClass]="{ \'is-invalid\': submitted && f.address.controls[i].controls.country.errors }">\n                        <div *ngIf="submitted && f.address.controls[i].controls.country.errors" class="invalid-feedback">\n                            <div *ngIf="f.address.controls[i].controls.country.errors.required">Country is required</div>\n                        </div>                \n                    </div>\n                    <div class="form-group">\n                        <label for="postcode">Postal Code</label>\n                        <input type="text" class="form-control" formControlName="postcode" [ngClass]="{ \'is-invalid\': submitted && f.address.controls[i].controls.postcode.errors }">\n                        <div *ngIf="submitted && f.address.controls[i].controls.postcode.errors" class="invalid-feedback">\n                            <div *ngIf="f.address.controls[i].controls.postcode.errors.required">Postal Code is required</div>\n                        </div>                \n                    </div>\n                <button (click)="deleteAddress(i);" class="btn btn-link">Delete Address</button>\n                <br>\n            </div>\n            <br>\n        </div>\n    </div>\n    <br>\n    <div tyle="font-weight:400; font-size:1rem">Attachment</div>\n    <br>\n    <input #file type="file" accept=\'image/*\' (change)="fileUpload(file.files)" style="display:none"/>\n    <button type="button" (click)="file.click()" class="btn btn-info">Select file</button>\n    <br><br>\n    <img [src]="imgURL" height="200" *ngIf="imgURL">\n    <br>\n    <hr>\n    <div class="form-group">\n        <button [disabled]="loading" class="btn btn-primary">Save User Information</button>\n        <img *ngIf="loading" class="pl-3" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />\n    </div>\n</form>\n'},219:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(66),a=r(97),l=r(38),d=r(55),c=function(){function e(e,t,r,n,o){this.formBuilder=e,this.route=t,this.router=r,this.authenticationService=n,this.alertService=o,this.loading=!1,this.submitted=!1,this.authenticationService.currentUserValue&&this.router.navigate(["/"])}return e.prototype.ngOnInit=function(){this.loginForm=this.formBuilder.group({username:["",a.Validators.required],password:["",a.Validators.required]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"},Object.defineProperty(e.prototype,"f",{get:function(){return this.loginForm.controls},enumerable:!0,configurable:!0}),e.prototype.onSubmit=function(){var e=this;this.submitted=!0,this.loginForm.invalid||(this.loading=!0,this.authenticationService.login(this.f.username.value,this.f.password.value).pipe(l.first()).subscribe(function(t){e.router.navigate([e.returnUrl])},function(t){e.alertService.error(t),e.loading=!1}))},e=n([i.Component({template:r(220)}),o("design:paramtypes",[a.FormBuilder,s.ActivatedRoute,s.Router,d.AuthenticationService,d.AlertService])],e)}();t.LoginComponent=c},220:function(e,t){e.exports='<h2>Login</h2>\n<form [formGroup]="loginForm" (ngSubmit)="onSubmit()">\n    <div class="form-group">\n        <label for="username">Username</label>\n        <input type="text" formControlName="username" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.username.errors }" />\n        <div *ngIf="submitted && f.username.errors" class="invalid-feedback">\n            <div *ngIf="f.username.errors.required">Username is required</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="password">Password</label>\n        <input type="password" formControlName="password" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.password.errors }" />\n        <div *ngIf="submitted && f.password.errors" class="invalid-feedback">\n            <div *ngIf="f.password.errors.required">Password is required</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <button [disabled]="loading" class="btn btn-primary">Login</button>\n        <img *ngIf="loading" class="pl-3" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />\n        <a routerLink="/signup" class="btn btn-link">Sign up</a>\n    </div>\n</form>'},221:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(66),a=r(97),l=r(38),d=r(55),c=function(){function e(e,t,r,n,o){this.formBuilder=e,this.router=t,this.authenticationService=r,this.userService=n,this.alertService=o,this.loading=!1,this.submitted=!1,this.reader=new FileReader,this.authenticationService.currentUserValue&&this.router.navigate(["/"]),this.createForm()}return e.prototype.ngOnInit=function(){},e.prototype.createForm=function(){this.signupForm=this.formBuilder.group({firstName:["",a.Validators.required],lastName:["",a.Validators.required],userName:["",a.Validators.required],password:["",[a.Validators.required,a.Validators.minLength(8)]],phone:["",a.Validators.required],birthday:["",a.Validators.required],address:this.formBuilder.array([this.formBuilder.group({street1:["",a.Validators.required],street2:[""],city:["",a.Validators.required],country:["",a.Validators.required],postcode:["",a.Validators.required]})])})},Object.defineProperty(e.prototype,"AddressForm",{get:function(){return this.signupForm.get("address")},enumerable:!0,configurable:!0}),e.prototype.addAddress=function(){var e=this.formBuilder.group({street1:["",a.Validators.required],street2:[""],city:["",a.Validators.required],country:["",a.Validators.required],postcode:["",a.Validators.required]});this.AddressForm.push(e)},e.prototype.deleteAddress=function(e){this.AddressForm.removeAt(e)},e.prototype.fileUpload=function(e){var t=this;if(0!==e.length){var r=new FileReader;r.readAsDataURL(e[0]),r.onload=function(e){t.imgURL=r.result,t.fileAttachment=r.result.toString()}}},Object.defineProperty(e.prototype,"f",{get:function(){return this.signupForm.controls},enumerable:!0,configurable:!0}),e.prototype.onSubmit=function(){var e=this;this.submitted=!0,this.signupForm.invalid||(this.signupForm.value.fileAttachment=this.fileAttachment,this.loading=!0,this.userService.signup(this.signupForm.value).pipe(l.first()).subscribe(function(t){e.alertService.success("Signup successful",!0),e.router.navigate(["/login"])},function(t){e.alertService.error(t),e.loading=!1}))},e=n([i.Component({template:r(222)}),o("design:paramtypes",[a.FormBuilder,s.Router,d.AuthenticationService,d.UserService,d.AlertService])],e)}();t.SignupComponent=c},222:function(e,t){e.exports='<h2>Sign Up Form</h2>\n<form [formGroup]="signupForm" (ngSubmit)="onSubmit()">\n    <div class="form-group">\n        <label for="firstName">First Name</label>\n        <input type="text" formControlName="firstName" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.firstName.errors }" />\n        <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">\n            <div *ngIf="f.firstName.errors.required">First Name is required</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="lastName">Last Name</label>\n        <input type="text" formControlName="lastName" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.lastName.errors }" />\n        <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback">\n            <div *ngIf="f.lastName.errors.required">Last Name is required</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="userName">Username</label>\n        <input type="text" formControlName="userName" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.userName.errors }" />\n        <div *ngIf="submitted && f.userName.errors" class="invalid-feedback">\n            <div *ngIf="f.userName.errors.required">Username is required</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="password">Password</label>\n        <input type="password" formControlName="password" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.password.errors }" />\n        <div *ngIf="submitted && f.password.errors" class="invalid-feedback">\n            <div *ngIf="f.password.errors.required">Password is required</div>\n            <div *ngIf="f.password.errors.minlength">Password must be at least 8 characters</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="password">Phone Number</label>\n        <input type="text" formControlName="phone" class="form-control" [ngClass]="{ \'is-invalid\': submitted && f.phone.errors }" />\n        <div *ngIf="submitted && f.phone.errors" class="invalid-feedback">\n            <div *ngIf="f.phone.errors.required">Phone Number is required</div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label for="password">Birthday</label>\n        <input type="text" formControlName="birthday" class="form-control"  [ngClass]="{ \'is-invalid\': submitted && f.birthday.errors }" />\n        <div *ngIf="submitted && f.birthday.errors" class="invalid-feedback">\n            <div *ngIf="f.birthday.errors.required">Birthday is required</div>\n        </div>\n    </div>\n    <br>\n    <div style="font-weight:400; font-size:1rem">Address</div>\n    <br>\n    <button (click)="addAddress();" class="btn btn-info">Add address</button>\n    <br><br>\n    <div formArrayName="address">\n        <div *ngFor="let address of AddressForm.controls; let i = index;" [formGroupName]="i" style="border: 1px solid #ced4da; padding:15px; border-radius: .25rem;">\n            <div class="form-group">\n                <label for="street1">Street Line 1</label>\n                <input type="text" class="form-control" formControlName="street1" [ngClass]="{ \'is-invalid\': submitted && f.address.controls[i].controls.street1.errors }" />\n                <div *ngIf="submitted && f.address.controls[i].controls.street1.errors" class="invalid-feedback">\n                    <div *ngIf="f.address.controls[i].controls.street1.errors.required">Street Line 1 is required</div>\n                </div>\n            </div>\n            <div class="form-group">\n                <label for="street2">Street Line 2</label>\n                <input type="text" class="form-control" formControlName="street2" />\n            </div>\n            <div class="form-group">\n                <label for="city">City</label>\n                <input type="text" class="form-control" formControlName="city" [ngClass]="{ \'is-invalid\': submitted && f.address.controls[i].controls.city.errors }">\n                <div *ngIf="submitted && f.address.controls[i].controls.city.errors" class="invalid-feedback">\n                    <div *ngIf="f.address.controls[i].controls.city.errors.required">City is required</div>\n                </div>\n            </div>\n            <div class="form-group">\n                <label for="country">Country</label>\n                <input type="text" class="form-control" formControlName="country" [ngClass]="{ \'is-invalid\': submitted && f.address.controls[i].controls.country.errors }">\n                <div *ngIf="submitted && f.address.controls[i].controls.country.errors" class="invalid-feedback">\n                    <div *ngIf="f.address.controls[i].controls.country.errors.required">Country is required</div>\n                </div>                \n            </div>\n            <div class="form-group">\n                <label for="postcode">Postal Code</label>\n                <input type="text" class="form-control" formControlName="postcode" [ngClass]="{ \'is-invalid\': submitted && f.address.controls[i].controls.postcode.errors }">\n                <div *ngIf="submitted && f.address.controls[i].controls.postcode.errors" class="invalid-feedback">\n                    <div *ngIf="f.address.controls[i].controls.postcode.errors.required">Postal Code is required</div>\n                </div>                \n            </div>\n            <button (click)="deleteAddress(i);" class="btn btn-link">Delete Address</button>\n            <br>\n        </div>\n        <br>\n    </div>\n    <br>\n    <div tyle="font-weight:400; font-size:1rem">Attachment</div>\n    <br>\n    <input #file type="file" accept=\'image/*\' (change)="fileUpload(file.files)" style="display:none"/>\n    <button type="button" (click)="file.click()" class="btn btn-info">Select file</button>\n    <br><br>\n    <img [src]="imgURL" height="200" *ngIf="imgURL">\n    <br>\n    <hr>\n    <div class="form-group">\n        <button [disabled]="loading" class="btn btn-primary">Sign up</button>\n        <img *ngIf="loading" class="pl-3" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==" />\n        <a routerLink="/login" class="btn btn-link">Cancel</a>\n    </div>\n</form>\n'},223:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(224))},224:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(66),a=r(55),l=function(){function e(e,t){this.router=e,this.authenticationService=t}return e.prototype.canActivate=function(e,t){return!!this.authenticationService.currentUserValue||(this.router.navigate(["/login"],{queryParams:{returnUrl:t.url}}),!1)},e=n([i.Injectable({providedIn:"root"}),o("design:paramtypes",[s.Router,a.AuthenticationService])],e)}();t.AuthGuard=l},225:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(226))},226:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(55),a=function(){function e(e){this.alertService=e}return e.prototype.ngOnInit=function(){var e=this;this.subscription=this.alertService.getMessage().subscribe(function(t){e.message=t})},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e=n([i.Component({selector:"alert",template:r(227)}),o("design:paramtypes",[s.AlertService])],e)}();t.AlertComponent=a},227:function(e,t){e.exports="<div *ngIf=\"message\" [ngClass]=\"{ 'alert': message, 'alert-success': message.type === 'success', 'alert-danger': message.type === 'error' }\">{{message.text}}</div>"},55:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(209)),n(r(210)),n(r(211))}},[[151,1,2]]]);